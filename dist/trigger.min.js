/*! trigger - v1.0.0 - 2013-05-08
* Copyright (c) 2013 Nathan Bubna; Licensed MIT, GPL */
(function(t,e){function n(){return r.main.apply(this,arguments)}n.translate=function(){return r.translate.apply(this,arguments)};var r=n._={version:"1.0.0",prefix:"",splitRE:/ (?![^\[\]]*\])+/g,noClickRE:/^(select|textarea)$/,noEnterRE:/^(textarea|button)$/,buttonRE:/^(submit|button|reset)$/,boxRE:/^(checkbox|radio)$/,all:function(t,e,n,i){e=e.split(r.splitRE);for(var u=0,a=e.length;a>u&&!r.preventDefault(i||n);u++){var o=r.parse(e[u]);o&&(a>1&&(o.triggers=e),i&&(o.previousEvent=i),n&&(o.originalEvent=n),o.promise=r.promise(t,e,u,n,i),i=r.event(t,o))}return i},promise:function(t,e,n,i,u){return function(a){this.preventDefault(),this.promise=a,a.then(function(){r.all(t,e.slice(n+1).join(" "),i,u)})}},parse:function(t){if(t){var e,n,r,i={trigger:t};if((n=t.indexOf("#",t.indexOf("]")))>0){i.tags=t.substring(n+1).split("#"),t=t.substring(0,n);for(var u=0,a=i.tags.length;a>u;u++)i[i.tags[u]]=!0}return(r=t.indexOf("["))>0&&(i.data=JSON.parse(t.substring(r).replace(/'/g,'"')),t=t.substring(0,r)),(e=t.indexOf(":"))>0&&(i.category=t.substring(0,e),t=t.substring(e+1)),i.type=t,i}},event:function(t,n){var i=e.createEvent("HTMLEvents");i.initEvent(n.type,!0,!0),i.preventDefault||(i.preventDefault=r.preventDefault);for(var u in n)r.prop(u),i[u]=n[u];return t.dispatchEvent(i),i},preventDefault:function(t,e){return t&&!e?t.defaultPrevented||t.returnValue===!1:(t&&t.preventDefault&&t.preventDefault(),(t||this).returnValue=!1,void 0)},listen:function(t){var e=t.target,n=r[t.type],i=!n&&t.type||n(t,e,e.nodeName.toLowerCase());i&&(e=r.find(e,i))&&(r.all(e,r.attr(e,i),t),r.preventDefault(t,!r.boxRE.test(e.type)))},on:function(n,r){e.addEventListener?e.addEventListener(n,r):e.attachEvent("on"+n,function(){r(t.event)})},find:function(t,e){return!t||r.attr(t,e)?t:r.find(t.parentNode,e)},attr:function(t,e){return t.getAttribute(r.prefix+e)},click:function(t,e,n){return!e.isContentEditable&&!r.noClickRE.test(n)&&("input"!==n||r.buttonRE.test(e.type))&&"click"},keyup:function(t,e,n){return!(13!==(t.keyCode||t.which)||e.isContentEditable||r.noEnterRE.test(n)||"a"===n&&e.getAttribute("href")||r.buttonRE.test(e.type))},main:function(n,i){return n&&"string"!=typeof n?i||(n=r.find(n,"click"),i=r.attr(n,"click")):(i=n,n=this===t?e:this),r.all(n,i)},translate:function(){for(var t=0,e=arguments.length;e>t;t++)r.on(arguments[t],r.listen)},prop:function(t){jQuery&&!r.prop[t]&&(r.prop[t]=!0,jQuery.event.props.push(t))}};"undefined"!=typeof module&&module.exports?module.exports=n:t.trigger=n,n.translate("click","keyup")})(window,document);