/*! trigger - v1.0.0 - 2013-05-07
* Copyright (c) 2013 Nathan Bubna; Licensed MIT, GPL */
(function(t,e){function n(n,i){return n&&"string"!=typeof n?i||(n=r.find(n),i=n.getAttribute(r.attr)):(i=n,n=this===t?e:this),r.all(n,i)}var r={version:"1.0.0",all:function(t,e,n){e=e.split(r.splitRE);for(var i=0,o=e.length,u=n;o>i&&!r.stop(u);i++){var s=r.parse(e[i]);s&&(o>1&&(s.triggers=e,s.promise=r.promise(t,e,i,u)),i>0&&(s.previousEvent=u),s.originalEvent=n,u=r.event(t,s))}return u},promise:function(t,e,n,i){return function(o){r.stop(i,!0),o.then(function(){r.all(t,e.slice(n+1).join(" "),i.originalEvent)})}},parse:function(t){if(t){var e,n,r,i={trigger:t};if((n=t.indexOf("#",t.indexOf("]")))>0){i.tags=t.substring(n+1).split("#"),t=t.substring(0,n);for(var o=0,u=i.tags.length;u>o;o++)i[i.tags[o]]=!0}return(r=t.indexOf("["))>0&&(i.data=JSON.parse(t.substring(r).replace(/\'/g,'"')),t=t.substring(0,r)),(e=t.indexOf(":"))>0&&(i.category=t.substring(0,e),t=t.substring(e+1)),i.type=t,i}},event:function(t,n){var i=e.createEvent("HTMLEvents");i.initEvent(n.type,!0,!0);for(var o in n)r.prop(o),i[o]=n[o];return t.dispatchEvent(i),i},stop:function(t,e){return t&&e&&(t.preventDefault?t.preventDefault():t.returnValue=!1),t&&(t.defaultPrevented||t.returnValue===!1)},listen:function(t){var e=t.target;return r[t.type](t,e,e.nodeName.toLowerCase())&&(e=r.find(e))?(r.all(e,e.getAttribute(r.attr),t),!r.stop(t,!r.boxRE.test(e.type))):void 0},find:function(t){return!t||t.getAttribute(r.attr)?t:r.find(t.parentNode)},click:function(t,e,n){return!e.isContentEditable&&!r.noClickRE.test(n)&&("input"!==n||r.buttonRE.test(e.type))},keyup:function(t,e,n){return!(13!==(t.keyCode||t.which)||e.isContentEditable||r.noEnterRE.test(n)||"a"===n&&e.getAttribute("href")||r.buttonRE.test(e.type))},attr:"trigger",splitRE:/ (?![^\[\]]*\])+/g,noClickRE:/^(select|textarea)$/,noEnterRE:/^(textarea|button)$/,buttonRE:/^(submit|button|reset)$/,boxRE:/^(checkbox|radio)$/,on:function(n,r){e.addEventListener?e.addEventListener(n,r):e.attachEvent("on"+n,function(){r(t.event)})},init:function(){r.on("click",r.listen),r.on("keyup",r.listen)},prop:function(t){jQuery&&!r.prop[t]&&(r.prop[t]=!0,jQuery.event.props.push(t))}};n._=r,"undefined"!=typeof module&&module.exports?module.exports=n:t.trigger=n,t.onload=function(){r.init()}})(window,document);